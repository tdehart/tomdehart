---
layout: post
title:  "Deckard Coin"
date:   2014-08-16 08:20:25
categories: blog
excerpt: How I helped ruin Diablo 3's virtual economy
---

I've held off writing this for 2 years because exploiting online video games is a touchy subject and most gamers have a (justified) hatred towards those who do it. Also it didn't help that the VP of Legal Affairs at Blizzard Entertainment, [Rod Rigole](http://members.calbar.ca.gov/fal/Member/Detail/181389), threatened me with a lawsuit if I didn't stop what I was doing. I've always wanted to write about it because I think it's an interesting story and reading [this blog post](http://diablo3story.blogspot.com/2014/07/a-diablo-3-story.html) has finally convinced me to finally get it out there. So this is a story about how I made the first publicly available multi-client Diablo 3 Auction House bot, made thousands selling it to other people, got in trouble with Blizzard's legal department, then banned from PayPal all in a span of about one week.

First a bit of context for those who didn't play Diablo 3 during its launch: [Diablo](http://bit.ly/1pSLIOm) is an action RPG with a heavy emphasis on player-found items. Items are obtained quite simply by killing monsters, and your character's ability to kill harder monsters is almost entirely dependent upon the quality of your gear. The ultimate goal of any Diablo game is to get cool loot and kill harder monsters, then get cooler loot and kill even harder monsters, and so on until you quit. It seems like a fruitless pursuit but the franchise is wildly popular with Diablo 3 selling more than [15 million copies](http://www.ign.com/articles/2014/02/07/diablo-3-surpasses-15-million-sales) since its release. 

Item-centric games like Diablo almost always have popular virtual economies where saavy players (with a lot of time on their hands) are able to make a quick buck pawning their goods to the casual players with disposable income. Everyone wants to have a powerful character and, when items determine the bulk of your strength, the only way to get them is to either spend a lot of time, or spend a lot of money. Where there is money to be made you will eventually find entrepeneurs moving in to optimize the delivery of goods to the buyers. As such, virtual currency farming, or [gold farming](http://en.wikipedia.org/wiki/Gold_farming), is estimated to be a [multi-billion dollar](http://www.theguardian.com/world/2011/may/25/china-prisoners-internet-gaming-scam) industry.

Gold farmers ruin the experience for many players by spamming chat channels and using in-game mail systems to mass advertise their services. World of Warcraft accounts are commonly worth [hundreds or thousands of dollars](http://www.playerauctions.com/wow-account/) thus [account hacking](http://news.cnet.com/No-end-in-sight-to-hacking-of-WoW-accounts/2100-1043_3-6174704.html) has become a major problem. On top of this, people are [being exploited](http://massively.joystiq.com/2008/10/25/gold-farmers-connected-with-$-38-million-money-laundering-bust/) for cheap labor in order to meet buyer demand of in-game gold.

In an effort to stop the arms race against gold farmers and alike, Blizzard decided to legitimize the entire process by introducing a [real money auction house](http://us.battle.net/d3/en/blog/6360586/real-money-auction-house-now-available-in-the-americas-6-12-2012) (RMAH) in Diablo 3. Instead of dealing with shady businesses in order to buy in-game currencies, players could buy directly from others and it was all facilitated by Blizzard.Their intentions were pure but Blizzard later found that the RMAH [undermined Diablo's core gameplay](http://us.battle.net/d3/en/blog/13354139/diablo-iii-auction-house-comes-to-a-close-3-18-2014) which resulted in them shutting it down 2 years later, but not before [people like me](http://venturebeat.com/2014/03/19/meet-the-gamers-who-earned-big-in-the-now-closed-diablo-iii-real-money-auction-house/view-all/) made tens of thousand of dollars in just a couple months.

Manipulating in-game economies has always been a fun pastime for me. I loved collecting [rare items](http://www.uoguide.com/Rare) in Ultima Online, I strived to be the richest auction house "baron" in World of Warcraft, and I sat on [d2jsp](http://www.d2jsp.org/) for hours flipping goods in Diablo 2. When Blizzard [announced the RMAH](http://us.blizzard.com/en-us/company/events/diablo3-announcement/#auction:auction-summary) for Diablo 3 I was poring over beta screenshots and hypothesizing about how I could optimize my income. I even started a virtual economy blog (which never took off) with a couple friends as a result of the Diablo 3 hype.

When Diablo 3 finally came out we hit the ground running. We were in the moment the login servers came up and hit max level in a day. Within a week we had characters optimized for running static [resplendent chests](http://www.diablowiki.net/Resplendent_Chest) and were selling the items on the auction house. Our original goal was just to make enough money to break even with the game's price. When we ended up with around $2,000 USD worth of gold to split between 5 people we were ecstatic! We didn't realize that we were just scratching the surface.

In a Diablo 3 IRC channel that I hung out in someone posted a screenshot of a weeks worth of their auction house transactions. He bought and sold dozens of items, many netting him tens of millions of gold each. Even with 5 people running our resplendent chest scheme we weren't coming anywhere close to this single person's income. It wasn't hard to figure out from the screenshot that he was simply buying low and selling high – it turned out that the average person was vastly underpricing their items. Once discovering this we pretty much stopped playing the game itself: the new game was the auction house. 

We spent hours tweaking our search criteria and discovering all of the obscure items that people wanted. It wasn't enough to pursue commonly sought after gear like [Blackthorn's Surcoat](http://us.battle.net/d3/en/item/blackthornes-surcoat) or [Andariel's Visage](http://us.battle.net/d3/en/item/andariels-visage). Instead we would look for underpriced rare rings and amulets that most players didn't even realize yet were some of the best items in the game. We managed huge spreadsheets to track the buy and sell prices of every item that passed through our inventories. We all kept our search lists and spreadsheets closely guarded. It was mostly so that we didn't tread on each other's markets but it was secretly a vicious competition where we bragged about our profits each day.

It didn't take long for us to start using [AutoHotkey](http://www.autohotkey.com/) scripts in an effort to automate the process. In fact, we were pretty late to the party by the time we had our first script up and running as it was not uncommon to get a hit on a good item just to see it disappear before your eyes as some other bot bought it before you. However, these scripts were often slow, took over your mouse/keyboard, and required full focus of the client. The scripting languages used by programs like AutoHotKey are also not great for making complex applications. The optimal Diablo 3 gear was a moving target as people pushed their characters into harder difficulties, so extending our scripts to meet new search criteria was an arduous process and tweaking mouse coordinates for every search. If we wanted to run more than one script at a time we had to set up spare computers, which many people did. As we expanded our operations we were desperately looking for a new bot that would solve some of these problems.

Our first break was with a bot posted on a Diablo 3 hacking forum that was capable of reading an XML-formatted list as your search criteria. No longer did we have to manually augment X/Y mouse positions and string inputs every time we wanted to search for something new – the bot did it all for you! Unfortunately this bot still required full focus of the window and it completely took over your mouse and keyboard. Additionally, it depended on the layout of the auction house user interface, so when a major patch made significant changes to the UI, the bot broke completely. The author was kind enough to post the source so I poked through the code and learned how it worked. I got a friend to help me repair the [search criteria list](https://github.com/tdehart/DeckardCoin/blob/master/AHBot/SearchQueryFilters.cs#L107-L282) and we were back in business.

After spending an entire day learning how the bot worked I became motivated to make something better. The author's work solved a lot of the grunt work like constructing a lookup table to figure out item/stat restrictions but there were various shortcomings that I wanted to fix. I knew next to nothing about Windows desktop development but my research eventually led me to Windows [PostMessage](http://msdn.microsoft.com/en-us/library/aa923831.aspx), a low-level function that allows two windows to communicate with each other. The official documentation is vague at best but this single function, I soon found out, was the workhorse of many successful gaming bots. I also found a neat memory reading library written in C# that would help tighten up the buying process when items were found on the auction house. The only problem was that everything I had was still in Java.

I spent the following week learning C# as I ported the entire auction house bot from Java. It was a lot of fun even though [my code](https://github.com/tdehart/DeckardCoin) was probably crap. In an effort to beat everyone else to the punch, I worked 16 hour days until it was done. Our failed virtual economy blog didn't need it anymore so I took the name Deckard Coin, a play on words of an iconic character of the series named [Deckard Cain](http://diablo.wikia.com/wiki/Deckard_Cain) who was known for his vast knowledge. [The result](https://www.youtube.com/watch?v=H-ZRnsiEpu8) was actually better than I expected. It was lightning fast for something that didn't inject into memory and could hook into any number of clients which was completely unique at the time.

At this point my friends and I were raking in the money, easily making over ten grand a week combined. Our finely tailored search lists grew to include hundreds of different variables and we'd wake up every morning with tons of highly valuable items in our stash. We bought disposable prepaid phones just so that we could verify multiple accounts and were regularly buying new copies of the game whenever we got banned. It was a huge operation that consumed 10-12 hours a day from each of us. After a while it wasn't even fun but we couldn't stop because it was so lucrative. However, by the time my bot was finished, we had already started to see our average daily income dropping. People were quitting the game after the initial rush, gold was becoming inflated due to gold farmers, and players were becoming smarter about their item listing prices. None of us stopped but I started to anticipate a point where the effort no longer matched the return. So against advice from people smarter than me, I decided to start selling Deckard Coin. And it all came crashing down.

Recall that no auction house bot at the time could provide anything close to Deckard Coin. It was a mishmash of poorly coded C# but it blew away any other publicly available bot. I whipped up a simple Rails app with authentication and started selling access to the site for $50 USD – a small price if you knew what you were doing. I promised extensive documentation, life time support, and discussion forums for sharing search config files. I didn't even have authentication built into the bot so I was just distributing an executable that anyone could open. In fact, I didn't even have a real payment system set up, it was just a link that sent $50 to a PayPal account. After I received a payment email I would respond with a username/password that I manually created.

I started publicly selling the bot on a Tuesday. By Friday of the same week I had received a cease and desist from Blizzard Entertainment and was facing dozens of reversed PayPal transactions. The three days between these two events were an absolute frenzy as I managed the distribution of website logins, provided support for confused customers, and attempted to soothe those that doubted the integrity of the bot. You can still see the comments in [this thread](http://www.ownedcore.com/forums/diablo-3/diablo-3-bots-programs/362192-release-deckard-coin-auction-house-bot.html). I also brought on a new developer and started splitting some of the profits as we worked on new features day and night. I was essentially running my own business and it was fun as hell. It felt like weeks had passed but three days was all it took until Blizzard took notice and told us to close shop.

On the morning of July 6, 2012 my friend who owned the domain deckardcoin.com received a call from [Rod Rigole](http://members.calbar.ca.gov/fal/Member/Detail/181389), the VP of legal affairs at Blizzard Entertainment and the man responsible for shutting down major botting operations like <a href="http://en.wikipedia.org/wiki/Glider_(bot)">Wow Glider</a>. My friend at first thought it was a prank call but it soon became clear that they were not messing around. We were to wipe the existence of Deckard Coin from the internet, or else face severe legal consequences most likely resulting in us being completely bankrupt. Oh, and we were told not to repeat anything Blizzard had told us. 

 In just a few days I had made thousands of dollars selling copies of a program that didn't even have authentication. Not only that, but I was having fun supporting a product instead of sitting in-game tweaking search criteria and listing items for sale. I knew in the back of my mind that it was over but I was in denial and sought advice from other bot developers to see what I should do. Their advice confirmed that I was stupid to even think about trying to sell such a thing without any form of legal protection. I even went through and started renaming the bot, registered a new domain, and created a new PayPal account. It dawned on me that night that it wasn't worth the hassle. We were already outed and I didn't want my friend to get into any more trouble just so that I could keep my money. I deleted my posts, took down the website, and waited to see what happened next.

 There's a lot of mistrust in the hacking and botting communities since viruses and scams are common. Read through the Deckard Coin thread that I linked above and you will see evidence of this suspicion. When I abruptly deleted the content from my posts and took down the website it was no surprise that I was branded as a scammer and banned from the forums. Within hours, half of my customers had already disputed their PayPal transactions and, without any real claim to their money, I decided to refund anyone that asked. After all, I advertised lifetime support and the bot did require an update with every game patch. A few customers were happy to let me keep their $50 since they had already made thousands of dollars back from the investment, but I lost the majority of the money in the end. My PayPal accounts were frozen for suspicious activity so I could no longer sell anything on the RMAH. The disputes lasted over a month while I made new PayPal accounts and rode the sinking ship that was the Diablo 3 economy. It wasn't long until PayPal found my fake accounts and froze them too. After a prolonged investigation they decided that I was too much of a risk proceeded to permanently ban me from PayPal.

 After my demise newer and better bots sprung up and the competition was fierce. Bots were lightning fast and made it impossible for a normal person to find any good deals on the auction house. As gold farmers improved their methods inflation became more of a problem. Players that didn't spend real money to buy gold were pretty much muscled out of the in-game economy. It was so hard to reach the late game content without using the auction house that many players simply quit. In fact, everyone I knew had stopped playing the game within a few couple months of its release. Posts [like these](http://www.reddit.com/r/gaming/comments/vmgg5/diablo_3_is_plummeting_an_active_public_online) epitomized the public opinion at the time. Diablo 3 was on life support and remained that way until the auction house was eventually shut down and [trading was disabled](http://imaginarymarkets.com/patch-2-0-1-live-on-diablo-3-gold-no-longer-tradeable-legendaries-and-set-bind-on-accoun).

This entire sequence of events happened in a mere two months. Most of us had made at least $20,000 USD just from relisting things that our bots had found and, being a poor student at the time, this was a welcome influx of wealth. While fun and lucrative, I was relieved when I finally quit. It required an obscene amount of time every day to manage spreadsheets, research new items, and tweak search values. There will always be new games on the horizon that offer the ability to profit from the sale of virtual goods, but I doubt we'll see anything like the Diablo 3 real money auction house ever again. It was a perfect storm of a hugely popular AAA title, poorly designed game systems, and a painfully misguided attempt to legitimize the gold selling black market. Diablo 3's lead designer Jay Wilson [went down in flames](http://www.cinemablend.com/games/Blizzard-CCO-Defends-Jay-Wilson-Says-They-re-Listening-Diablo-3-Community-51620.html) for these mistakes. His replacement, [Josh Mosqueira](http://www.diablowiki.net/Josh_Mosqueira), has been doing a great job rebuilding it from the ashes and I recommend anyone that quit during the shaky launch to give the game another try.